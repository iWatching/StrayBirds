---
layout: post
title: 优化系列 04：内存泄露场景一览
category: 优化
comments: false
---

#### 内存泄露

Java内存泄漏指的是进程中某些对象（垃圾对象）已经没有使用价值了，但是它们却可以直接或间接地引用到gc roots导致无法被GC回收。无用的对象占据着内存空间，使得实际可使用内存变小，形象地说法就是内存泄漏。

#### 内存溢出

内存溢出（out of memory）通俗理解就是内存不够，通常在运行大型软件或游戏时，软件或游戏所需要的内存远远超出了你主机内安装的内存所承受大小，就叫内存溢出。此时软件或游戏就运行不了，系统会提示内存溢出，有时候会自动关闭软件。


#### Android内存泄露
Android的虚拟机是基于寄存器的Dalvik，它的最大堆大小一般是16M，有的机器为24M。因此我们所能利用的内存空间是有限的。如果我们的内存占用超过了一定的水平就会出现OutOfMemory的错误。当前目前已经达到了256M或者更大(机型)


#### 为什么会出现内存不够用的情况呢？我想原因主要有两个：

* 由于我们程序的失误，长期保持某些资源（如Context）的引用，造成内存泄露，资源得不到释放。
* 保存了多个耗用内存过大的对象（如Bitmap），造成内存超出限制。

#### 内存泄露和内存溢出区别

* 内存泄露memory leak
	* 是指程序在申请内存后，无法释放已申请的内存空间，一次内存泄露危害可以忽略，但内存泄露堆积后果很严重，无论多少内存迟早会被占光。   
	* 是指向系统中申请分配内存进行使用（new），但使用完后，却没有归还。申请到的内存自己也不能再访问，而系统也不能再次将它分配给需要的程序。

* 内存溢出out of memory
	* 是指程序在申请内存时，没有足够的内存空间供其使用，出现out of  memory；比如申请了一个integer,但给他存了long才能存下的数。比如栈：栈满时，进行进栈，内存溢出。栈空时，进行出栈，内存也会溢出。分配内存不足以放下数据项序列，称为内存溢出。

内存泄露会导致内存溢出。

#### 已知可导致内存泄露的场景

##### 1. 静态变量导致的内存泄露




参考链接：

1.  
 