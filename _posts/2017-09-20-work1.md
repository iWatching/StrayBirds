---
layout: post
title: 短视频拍摄
category: 工作
comments: false
---

* 1. Review 短视频录制功能(见常见问题中：项目存在问题)
* 2. 调研美摄SDK
* 3. 调研趣拍SDK
* 4. 调研七牛SDK
* 5. 综合其他短视频SDK功能对比(价格，功能稳定性，技术支持程度)
* 6. 结论
	* 采用直接买断使用特定部分功能(不推荐使用云服务方案)
	* 七牛客服支持比较及时；低端机支持不理想；
	* 趣拍功能特性更多但也有性能问题，录制10s视频，用coolpad手机录制也有抖动感
	* 
  
公司软件录制视频场景
	
* 即刻约
 * 服务者个人主页视频集视频(60s)
 * 服务者个人主页形象视频(60s)

* 美丽约
 * 人脸识别、录制3秒视频发送至后台存档(女号注册时,3s)
 * 动态发布短视频,频道录制短视频(30s)
 * 个人主页录制普通,精华短视频(10s)
 * 生成和变更视频认证时录制视频(10s)
 * 回答视频问答录制视频(15s)
 * 服务技能视频录制(60s)

---
常见问题

* 项目存在问题
	* 即刻约：软件中都采用全屏录制，所以录制下来视频分辨率都是手机屏幕分辨率大小(绝大多数大多数)，结合手机多样分辨率，所以在少说比例"16:9,4:3,16:10"以外的手机上播放视频，是压缩或拉伸变形的
	* 即刻约：点按录制视频按钮逻辑有问题，有片段处于待删除状态时，进度条展示没在录制中，但实际是在录制状态
	* 即刻约：当处于录制视频页面录制完一段时间后，按Home键退出，然后返回到录制页面，摄像头又从后置变为了前置摄像头
	* 即刻约：即刻约正在录音，美丽约暂时不能录音？
	* 即刻约：录制60s视频，上传成功花费了90s时间，测试设备M1 metal,正常网络环境
	* 即刻约：录制视频过程中，不能手势放大局部区域
	* 即刻约：为什么设置的720 * 1280的分辨率，但是录制生成的视频大小为：540 * 960
	* 即刻约：即刻约Nexus 5x录制视频过程中，会报错；
	* 美丽约：个人主页，录制普通短视频，上传成功后，video文件夹下,还存在上传成功后的短视频,合理情况下应该删除掉
	* 美丽约: 录制视频，Nexus 5x录制画面正常，生成的最终视频角度不正确(倒立)

* SDK存在问题
	* 秒拍：长期未维护；集成有权限适配问题；处理视频效率慢；确认一下秒拍最新 SDK版本(3.1版本,最后更新：2015.10.25)
	* 美摄：该SDK相对使用起来比较难懂，目前频率是一周一更新，稳定性待进一步完善
	* 七牛：我现在录制上传一个视频设置的参数如下：预览尺寸：720P;预览比例：16:9;编码尺寸：1280*720，编码码率：800kbps，提示上传成功地址打开错误：<http://114.80.216.199/xdispatch/shortvideo.pdex-service.com/record.mp4>
	* 七牛：录制时设置的编码尺寸就是最终生成的视频分辨率
	* 七牛：刚刚录制完成的视频，马上进行片段选择裁切，类似你们选择视频剪辑功能，在录制完成后，就是可编辑的.mp4文件直接进行剪辑
	* 七牛：录制过程中不支持手势放大局部区域进行拍摄
	* 七牛：录制预览页面,SurfaceView显示的宽高比你们是如何考虑的？是否一句设置的预览宽高比来设置SurefaceView的宽高？
	* 七牛：不同分辨率大小的手机，如果场景都是全屏播放视频，你们是如何做适配的？
	* 七牛：针对Android手机录制的视频，ios端播放视频，有没有需要特别注意的关键点？
	* 七牛：Demo里面，能否设置录制最大录制时长
	* 七牛：Demo里我没有找到PLSVideoConfiguration
	* 七牛：下载我自己录制的视频，看下一定时长视频有多大(M)


* 常见问题
	
	* 常规录制视频，实时美颜，滤镜一般都是最终生成视频后在处理?
	* 录制视频，我们设置的常用码率为800？其他SDK建议码率？
	* 全屏录制不同时长的短视频，那其实就限制了摄像头预览宽高比就应该跟屏幕宽高比一致，是否每台手机Camera的所支持的预览尺寸里面，就有屏幕分辨率同样的一组值或者说至少有一组宽高比一致的一组值？
	* 
	
---

* 第三方短视频录制SDK
	* 趣拍<https://www.aliyun.com/solution/media/videosdk?spm=5176.8009263.386557.642.kunbyV>
	* 美摄<https://www.meishesdk.com/doc_ch/html/content/index.html>
	* 七牛<https://github.com/pili-engineering/PLDroidShortVideo>
	* 云帆加速(不考虑)
	* 又拍云(不考虑)
	* 秒拍  <https://www.vitamio.org>(不考虑)
	
--- 

* 功能一览表
	
SDK         |   即刻约  |   趣拍  |   美摄   |  七牛云  |   秒拍   |
---         |   ---    |    --- |  ---     |  ---   |   ---    |
断点录制     |   Y      |    Y   |   Y      |   Y     |     Y   |
回删        |    Y     |    Y    |   Y     |   Y     |     Y   | 
点击长按拍摄  |    Y     |    Y   |   Y     |    Y     |    Y    |
选择封面     |    Y     |         |         |    Y    |         |
关键帧预览   |    Y     |         |         |    Y    |         |
实时美颜     |         |    Y    |   Y     |    Y    |     N   |
导入编辑     |         |    Y    |         |    Y    |         | 
人脸/贴纸    |         |     Y   |    Y    |         |    N    | 
摄像头切换   |   Y     |   Y     |    Y    |         |    Y    | 
分辨率调整   |         |   Y     |    Y    |         |         | 
实时水印     |        |    Y    |   Y     |         |         | 
摄像头缩放   |        |    Y    |         |    N     |        | 
实时滤镜    |        |    Y     |   Y     |         |    Y    |
实时变速    |        |    Y     |         |         |         | 
实时混音    |        |    Y     |         |         |         | 
气泡字幕    |        |    Y     |         |         |         | 
 MV效果    |        |    Y     |         |         |         |
多视频拼接  |        |    Y     |         |         |         |
静音功能    |        |          |         |    Y    |         |
剪辑指定区间 |       |          |         |    Y    |         |
倍数拍摄    |        |          |         |    Y    |         |

---

* 录制视频相关参数指标

SDK (360P)     |   10s  |   20s  | 30s    |  60s   |
---            |    --- |  ---   |  ---  |  ---   |
趣拍(M1 Metal)  |   1.3M |   2.5M  |  3.8M |  7.5M  |
美摄(M1 Metal)  |    Y   |   Y      |       |    Y     | 
七牛(M1 Metal)  |    Y   |   Y    |        |   Y     |
美丽约(M1 Metal)|        |         |         |        |
 
SDK (480P)  |   10s  |   20s  | 30s |  60s   |
---        |    --- |  ---   |  ---  |  ---   |
趣拍       |   2.3M |   4.4M  |  6.8M |       |
美摄       |    Y   |   Y    |      |    Y   | 
七牛云      |    Y   |   Y    |      |   Y   |
秒拍      |    Y   |   Y    |      |    N   |

---

其他：

* 参考文献
	* <http://www.jianshu.com/p/614b3e6e641a>


      

